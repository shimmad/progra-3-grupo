<%- include('partials/head') -%>
<link rel="stylesheet" href="/css/turnos.css">
<body>
  <%- include('partials/header') -%>

  <main>
    <section id="turnos">
    <div class="lista">
      <h2>Lista de Turnos</h2>
      <ul>
        <% turnos.forEach(turno => { %>
          <li>
            <span>
              <strong>Fecha:</strong> <%= turno.fecha %> — 
              <strong>Hora:</strong> <%= turno.hora %> — 
              <strong>Paciente:</strong> <%= turno.Paciente?.nombre %> <%= turno.Paciente?.apellido %> — 
              <strong>Medico:</strong> <%= turno.Medico?.nombre %>

              </span>
            <% if (esMedico) { %>
              <div class="acciones">
                <form action="/api/v1/turnos/<%= turno._id %>" method="POST">
                  <input type="hidden" name="_method" value="DELETE">
                  <button type="submit">Eliminar</button>
                </form>
                <a href="/turnos/<%= turno._id %>/editar">Editar</a>
              </div>
            <% } %>
          </li>
        <% }) %>
      </ul>
    </div>

    <% if (esMedico) { %>
      <div class="formulario">
        <h2>Registrar nuevo turno</h2>
        <form id="formTurno" action="/api/v1/turnos" method="POST">
          <label>Paciente ID: <input type="number" name="pacienteId" required></label>
          <label>Fecha: <input type="text" name="fecha" placeholder="dd/mm/yyyy" required></label>
          <label>Hora: <input type="text" name="hora" placeholder="hh:mm" required></label>
          <button type="submit">Registrar</button>
        </form>
      </div>
    <% } %>
    </section>
  </main>

  <%- include('partials/footer') -%>
</body>
